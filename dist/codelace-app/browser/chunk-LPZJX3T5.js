import{a}from"./chunk-EY5NCU4T.js";import{b as p}from"./chunk-GDZNKSMB.js";import{$ as l,C as s,W as h,o as n,r as c}from"./chunk-OBHTKAXJ.js";var u="codelace_auth",E=(()=>{let e=class e{constructor(r){this.http=r;let t=localStorage.getItem(u);t&&(this._auth=JSON.parse(t))}authenticate(r){return this.http.post(`${a.apiURL}/auth/token`,r).pipe(c(t=>(console.log("Response from server:",t),localStorage.setItem(u,JSON.stringify(t)),this._auth=t,t.student)),s(t=>(console.error("Error during authentication: ",t),n(()=>t))))}get user(){return this._auth?.student}get token(){return this._auth?.token}logout(){localStorage.removeItem(u),this._auth=void 0}signup(r){return this.http.post(`${a.apiURL}/students/signup`,r).pipe(s(t=>{let o="Error desconocido";return t.error instanceof ErrorEvent?o=`Error: ${t.error.message}`:t.error.detail==="The email address is already in use."?o="Correo en uso. Inicia sesi\xF3n :)":t.error.detail==="The username is already in use."&&(o="Nombre de usuario en uso :("),console.error(o),n(()=>o)}))}};e.\u0275fac=function(t){return new(t||e)(l(p))},e.\u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();export{E as a};
